import sys
import src.greeter as greeter
import boto3
from gpsdclient import GPSDClient


# get your data as json strings:
#with GPSDClient(host="127.0.0.1") as client:
#    for result in client.json_stream():
#        print(result)

# or as python dicts (optionally convert time information to `datetime` objects)
def get_values(units):
        with GPSDClient() as client:
                
	for result in client.dict_stream(convert_datetime=True, filter=["TPV"]):
                        lat = result.get("lat", "n/a")
                        lon = result.get("lon", "n/a")
                        speedms = result.get("speed", "n/a")
                        elevationm= result.get("alt", "n/a")
                        if units == "metric":
                            speed = speedms
                            elevation = elevationm
                        elif units == "imperial":
                            speed = (speedms * 2.2369362920544)
                            elevation = (elevationm * 3.280839895)
                        print(lat)
                        print(lon)
                        print(speed)
                        print(elevation)

def main():
    TrackerName = sys.argv[1]
    Units = sys.argv[2]
    get_values(Units)

if __name__ == "__main__":
    main()
